# .npmrc
# Source-controlled NPM configuration for Artifactory
# Placeholders below are replaced at CI runtime by .npm_base before_script
# For local dev: export the three env vars in your shell or .env file

# ── Registry ─────────────────────────────────────────────────
registry=${NPM_DOWNLOAD_REGISTRY}
always-auth=true
email=${NPM_EMAIL}

# ── Auth (host-scoped) ────────────────────────────────────────
# Virtual / download repo
//${NPM_REGISTRY_HOST}/artifactory/api/npm/${NPM_VIRTUAL_REPO}/:_authToken=${NPM_AUTH_TOKEN}
//${NPM_REGISTRY_HOST}/artifactory/api/npm/${NPM_VIRTUAL_REPO}/:username=${NPM_USER}
//${NPM_REGISTRY_HOST}/artifactory/api/npm/${NPM_VIRTUAL_REPO}/:_password=${NPM_PASSWORD_BASE64}

# Snapshot publish repo
//${NPM_REGISTRY_HOST}/artifactory/api/npm/${NPM_SNAPSHOT_REPO}/:_authToken=${NPM_AUTH_TOKEN}
//${NPM_REGISTRY_HOST}/artifactory/api/npm/${NPM_SNAPSHOT_REPO}/:username=${NPM_USER}
//${NPM_REGISTRY_HOST}/artifactory/api/npm/${NPM_SNAPSHOT_REPO}/:_password=${NPM_PASSWORD_BASE64}

# Release publish repo
//${NPM_REGISTRY_HOST}/artifactory/api/npm/${NPM_RELEASE_REPO}/:_authToken=${NPM_AUTH_TOKEN}
//${NPM_REGISTRY_HOST}/artifactory/api/npm/${NPM_RELEASE_REPO}/:username=${NPM_USER}
//${NPM_REGISTRY_HOST}/artifactory/api/npm/${NPM_RELEASE_REPO}/:_password=${NPM_PASSWORD_BASE64}

# ── Reliability ──────────────────────────────────────────────
strict-ssl=true
fetch-retries=3
fetch-retry-mintimeout=10000
fetch-retry-maxtimeout=60000
loglevel=notice
save-exact=true

# ── Local dev hint ───────────────────────────────────────────
# export NPM_REGISTRY_HOST="artifactory.company.com"
# export NPM_VIRTUAL_REPO="npm-virtual"
# export NPM_SNAPSHOT_REPO="npm-snapshot-local"
# export NPM_RELEASE_REPO="npm-release-local"
# export NPM_DOWNLOAD_REGISTRY="https://artifactory.company.com/artifactory/api/npm/npm-virtual/"
# export NPM_AUTH_TOKEN="<your-artifactory-api-key>"
# export NPM_USER="<your-username>"
# export NPM_EMAIL="<your-email>"
# export NPM_PASSWORD_BASE64=$(echo -n "<your-password>" | base64)
